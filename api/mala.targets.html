

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>mala.targets package &mdash; Materials Learning Algorithms (MALA)  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/mala_favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing to MALA" href="../CONTRIBUTE.html" />
    <link rel="prev" title="mala.network package" href="mala.network.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Materials Learning Algorithms (MALA)
          

          
          </a>

          
            
            
              <div class="version">
                v0.1.0-354-g26125ee
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/background.html">Theoretical Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/preprocessing.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/neuralnetworks.html">Neural Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/postprocessing.html">Postprocessing</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/README.html">Installation of MALA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/INSTALL_LAMMPS.html">Setting up LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/INSTALL_TE_QE.html">Python bindings to Quantum Espresso</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/tested_systems.html">Successfully tested on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/sql_on_hpc.html">Using postgres on HPC infrastructure (for optuna)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/tensorboard_setup.html">Set up tensorboard to visualize data from HPC cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">mala</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="mala.html">mala package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="mala.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="mala.common.html">mala.common package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mala.datahandling.html">mala.datahandling package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mala.descriptors.html">mala.descriptors package</a></li>
<li class="toctree-l4"><a class="reference internal" href="mala.network.html">mala.network package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">mala.targets package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mala.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="mala.html#module-mala.version">mala.version module</a></li>
<li class="toctree-l3"><a class="reference internal" href="mala.html#module-mala">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTE.html">Contributing to MALA</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Materials Learning Algorithms (MALA)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">mala</a> &raquo;</li>
        
          <li><a href="mala.html">mala package</a> &raquo;</li>
        
      <li>mala.targets package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com//mala-project/mala/blob/develop/docs/source/api/mala.targets.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mala-targets-package">
<h1>mala.targets package<a class="headerlink" href="#mala-targets-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mala.targets.calculation_helpers">
<span id="mala-targets-calculation-helpers-module"></span><h2>mala.targets.calculation_helpers module<a class="headerlink" href="#module-mala.targets.calculation_helpers" title="Permalink to this headline">¶</a></h2>
<p>Helper functions for several calculation tasks (such as integration).</p>
<dl class="py function">
<dt id="mala.targets.calculation_helpers.analytical_integration">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">analytical_integration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_ev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.analytical_integration" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform analytical integration following the outline given by [1].</p>
<p>More specifically, this function solves Eq. 32, by constructing the
weights itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>D</strong> (<em>numpy.array</em><em> or </em><em>float</em>) – Either LDOS or DOS data.</p></li>
<li><p><strong>I0</strong> (<em>string</em>) – <p>I_0 from Eq. 33. The user only needs to provide which function should
be used. Arguments are:</p>
<blockquote>
<div><ul>
<li><p>F0</p></li>
<li><p>F1</p></li>
<li><p>F2</p></li>
<li><p>S0</p></li>
<li><p>S1</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>I1</strong> (<em>string</em>) – <p>I_1 from Eq. 33. The user only needs to provide which function should
be used. Arguments are:</p>
<blockquote>
<div><ul>
<li><p>F0</p></li>
<li><p>F1</p></li>
<li><p>F2</p></li>
<li><p>S0</p></li>
<li><p>S1</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>fermi_energy_ev</strong> (<em>float</em>) – The fermi energy in eV.</p></li>
<li><p><strong>energy_grid</strong> (<em>numpy.array</em>) – Energy grid on which the integration should be performed.</p></li>
<li><p><strong>temperature_k</strong> (<em>float</em>) – Temperature in K.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>integration_value</strong> – Value of the integral.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array or float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.entropy_multiplicator">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">entropy_multiplicator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.entropy_multiplicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the multiplicator function for the entropy integral.</p>
<p>Entropy integral is f(E)*log(f(E))+(1-f(E)*log(1-f(E))</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em><em> or </em><em>numpy.array</em>) – Energy for which the Fermi function is supposed to be calculated in
energy_units.</p></li>
<li><p><strong>fermi_energy</strong> (<em>float</em>) – Fermi energy level in energy_units.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>energy_units</strong> (<em>string</em>) – <p>Currently supported:</p>
<blockquote>
<div><ul>
<li><p>eV</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>multiplicator_val</strong> – Value of the multiplicator function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.fermi_function">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">fermi_function</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.fermi_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Fermi function f(E) = 1 / (1 + e^((E-E_F)/(k_B*T))).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em><em> or </em><em>numpy.array</em>) – Energy for which the Fermi function is supposed to be calculated in
energy_units.</p></li>
<li><p><strong>fermi_energy</strong> (<em>float</em>) – Fermi energy level in energy_units.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>energy_units</strong> (<em>string</em>) – <p>Currently supported:</p>
<blockquote>
<div><ul>
<li><p>eV</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fermi_val</strong> – Value of the Fermi function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.fermi_function_eV">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">fermi_function_eV</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_ev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_ev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.fermi_function_eV" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Fermi function f(E) = 1 / (1 + e^((E-E_F)/(k_B*T))).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_ev</strong> (<em>float</em>) – Energy in eV.</p></li>
<li><p><strong>fermi_energy_ev</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fermi_val</strong> – Value of the Fermi function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.gaussians">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">gaussians</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.gaussians" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate multiple gaussians on the same grid, but with different centers.</p>
<p>Gaussian functions are used as approximations to the delta in the
Brillouin zone integration. Note that this defines Gaussians without the
factor of 1/sqrt(2). All the Gaussians will have the same sigmas
:param grid: Grid on which this Gaussian is defined.
:type grid: np.array
:param centers: Array of centers for the Gaussians
:type centers: np.array
:param sigma: Sigma value for the Gaussian.
:type sigma: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>multiple_gaussians</strong> – multiple gaussians on the same grid, but with different centers.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_beta">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_beta</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_beta" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate beta = 1 / (k_B * T).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beta</strong> – Thermodynamic beta.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_f0_value">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_f0_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_f0_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the F0 value for the analytic integration formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – x value for function.</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – Thermodynamic beta.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function_value</strong> – F0 value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_f1_value">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_f1_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_f1_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the F1 value for the analytic integration formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – x value for function.</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – Thermodynamic beta.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function_value</strong> – F1 value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_f2_value">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_f2_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_f2_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the F2 value for the analytic integration formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – x value for function.</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – Thermodynamic beta.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function_value</strong> – F2 value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_s0_value">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_s0_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_s0_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the S0 value for the analytic integration formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – x value for function.</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – Thermodynamic beta.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function_value</strong> – S0 value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.get_s1_value">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">get_s1_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.get_s1_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the S1 value for the analytic integration formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – x value for function.</p></li>
<li><p><strong>beta</strong> (<em>float</em>) – Thermodynamic beta.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>function_value</strong> – S1 value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.calculation_helpers.integrate_values_on_spacing">
<code class="sig-prename descclassname"><span class="pre">mala.targets.calculation_helpers.</span></code><code class="sig-name descname"><span class="pre">integrate_values_on_spacing</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spacing</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.calculation_helpers.integrate_values_on_spacing" title="Permalink to this definition">¶</a></dt>
<dd><p>Integrate values assuming a uniform grid with a provided spacing.</p>
<p>Different integration methods are available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>numpy.array</em>) – Values to be integrated.</p></li>
<li><p><strong>spacing</strong> (<em>int</em>) – Spacing of the grid on which the integration is performed.</p></li>
<li><p><strong>method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Axis along which the integration is performed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>integral_values</strong> – The value of the integral.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mala.targets.cube_parser">
<span id="mala-targets-cube-parser-module"></span><h2>mala.targets.cube_parser module<a class="headerlink" href="#module-mala.targets.cube_parser" title="Permalink to this headline">¶</a></h2>
<p>Cube parser, taken from cubetools (see below).</p>
<hr class="docutils" />
<p>Module: cubetools</p>
<hr class="docutils" />
<p>Description:
Module to work with Gaussian cube format files
(see <a class="reference external" href="http://paulbourke.net/dataformats/cube/">http://paulbourke.net/dataformats/cube/</a>)</p>
<hr class="docutils" />
<p>What does it do:</p>
<ul class="simple">
<li><p>Read/write cube files to/from numpy arrays (dtype=float*)</p></li>
<li><p>Read/write pairse of cube files to/from numpy arrays (dtype=complex*)</p></li>
<li><p>Provides a CubeFile object, to be used when cubefiles with constant and
static data is required. It simulates the readline method
of a file object with a cube file opened, without creating a file</p></li>
</ul>
<hr class="docutils" />
<p>Dependency: numpy</p>
<hr class="docutils" />
<p>Author: P. R. Vaidyanathan (aditya95sriram &lt;at&gt; gmail &lt;dot&gt; com)
Date: 25th June 2017</p>
<hr class="docutils" />
<p>MIT License</p>
<p>Copyright (c) 2019 P. R. Vaidyanathan</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
<hr class="docutils" />
<dl class="py class">
<dt id="mala.targets.cube_parser.CubeFile">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mala.targets.cube_parser.</span></code><code class="sig-name descname"><span class="pre">CubeFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">const</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.CubeFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object which mimics a cube file opened as a file object.</p>
<p>Done by returning output in the correct format, matching the
metadata of the source cube file and replacing volumetric
data with static data provided as arg to the constructor.
Doesn’t copy atoms metadata, retains number of atoms, but
returns dummy atoms
Mimics file object’s readline method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcname</strong> (<em>string</em>) – source file to copy metadata from</p></li>
<li><p><strong>const</strong> (<em>int</em>) – numeric value to return instead of volumetric data</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mala.targets.cube_parser.CubeFile.readline">
<code class="sig-name descname"><span class="pre">readline</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.CubeFile.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read next line.</p>
<p>Mimic readline method of file object with cube file opened.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>retval</strong> – Current line.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mala.targets.cube_parser.read_cube">
<code class="sig-prename descclassname"><span class="pre">mala.targets.cube_parser.</span></code><code class="sig-name descname"><span class="pre">read_cube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.read_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Read cube file into numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>string</em>) – filename of cube file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>data</strong> (<em>numpy.array</em>) – Data from cube file.</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – Meta data from cube file.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.cube_parser.read_imcube">
<code class="sig-prename descclassname"><span class="pre">mala.targets.cube_parser.</span></code><code class="sig-name descname"><span class="pre">read_imcube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rfname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.read_imcube" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in two cube files at once.</p>
<p>One contains the real part and the other contains the
imag part. If only one filename given, other filename is inferred.</p>
<p>params:</p>
<p>returns: np.array (real part + j*imag part)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rfname</strong> (<em>string</em>) – filename of cube file of real part</p></li>
<li><p><strong>ifname</strong> (<em>string</em>) – optional, filename of cube file of imag part</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>data</strong> (<em>numpy.array</em>) – Data from cube file.</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – Meta data from cube file.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.cube_parser.write_cube">
<code class="sig-prename descclassname"><span class="pre">mala.targets.cube_parser.</span></code><code class="sig-name descname"><span class="pre">write_cube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.write_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Write volumetric data to cube file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>numpy.array</em>) – volumetric data consisting real values</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – <p>dict containing metadata with following keys:</p>
<blockquote>
<div><ul>
<li><p>atoms: list of atoms in the form (mass, [position])</p></li>
<li><p>org: origin</p></li>
<li><p>xvec,yvec,zvec: lattice vector basis</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>fname</strong> (<em>string</em>) – filename of cubefile (existing files overwritten)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mala.targets.cube_parser.write_imcube">
<code class="sig-prename descclassname"><span class="pre">mala.targets.cube_parser.</span></code><code class="sig-name descname"><span class="pre">write_imcube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rfname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.cube_parser.write_imcube" title="Permalink to this definition">¶</a></dt>
<dd><p>Write two cube files from compley valued volumetric data.</p>
<p>One for the real part and one for the imaginary part.
Data about atoms, origin and lattice vectors are kept same for both.
If only one filename given, other filename is inferred.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>numpy.array</em>) – volumetric data consisting complex values</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – <p>dict containing metadata with following keys:</p>
<blockquote>
<div><ul>
<li><p>atoms: list of atoms in the form (mass, [position])</p></li>
<li><p>org: origin</p></li>
<li><p>xvec,yvec,zvec: lattice vector basis</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>rfname</strong> (<em>string</em>) – filename of cube file containing real part</p></li>
<li><p><strong>ifname</strong> (<em>string</em>) – optional, filename of cube file containing imag part</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mala.targets.density">
<span id="mala-targets-density-module"></span><h2>mala.targets.density module<a class="headerlink" href="#module-mala.targets.density" title="Permalink to this headline">¶</a></h2>
<p>Electronic density calculation class.</p>
<dl class="py class">
<dt id="mala.targets.density.Density">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mala.targets.density.</span></code><code class="sig-name descname"><span class="pre">Density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mala.targets.target_base.TargetBase" title="mala.targets.target_base.TargetBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">mala.targets.target_base.TargetBase</span></code></a></p>
<p>Postprocessing / parsing functions for the electronic density.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<a class="reference internal" href="mala.common.html#mala.common.parameters.Parameters" title="mala.common.parameters.Parameters"><em>mala.common.parameters.Parameters</em></a>) – Parameters used to create this TargetBase object.</p>
</dd>
</dl>
<dl class="py method">
<dt id="mala.targets.density.Density.from_ldos">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_ldos</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.from_ldos" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a density object from an LDOS object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ldos_object</strong> (<a class="reference internal" href="#mala.targets.ldos.LDOS" title="mala.targets.ldos.LDOS"><em>mala.targets.ldos.LDOS</em></a>) – LDOS object used as input.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dos_object</strong> – Density object created from LDOS object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mala.targets.density.Density" title="mala.targets.density.Density">Density</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.get_density">
<code class="sig-name descname"><span class="pre">get_density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">density_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_threedimensional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_dimensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.get_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the electronic density, based on density data.</p>
<p>This function only does reshaping, no calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>density_data</strong> (<em>numpy.array</em>) – Electronic density data, this array will be returned unchanged
depending on the other parameters.</p></li>
<li><p><strong>convert_to_threedimensional</strong> (<em>bool</em>) – If True, then a density saved as a 1D array will be converted to
a 3D array (gridsize -&gt; gridx * gridy * gridz)</p></li>
<li><p><strong>grid_dimensions</strong> (<em>list</em>) – Provide a list of dimensions to be used in the transformation
1D -&gt; 3D. If None, MALA will attempt to use the values read with
TargetBase.read_additional_read_additional_calculation_data .
If that cannot be done, this function will raise an exception.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>density_data</strong> – Electronic density data in the desired shape.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.get_energy_contributions">
<code class="sig-name descname"><span class="pre">get_energy_contributions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">density_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atoms_Angstrom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qe_input_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qe_pseudopotentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.get_energy_contributions" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract density based energy contributions from Quantum Espresso.</p>
<p>Done via a Fortran module accesible through python using f2py.
Returns: e_rho_times_v_hxc, e_hartree,  e_xc, e_ewald</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>density_data</strong> (<em>numpy.array</em>) – Density data on a grid.</p></li>
<li><p><strong>create_file</strong> (<em>bool</em>) – If False, the last mala.pw.scf.in file will be used as input for
Quantum Espresso. If True (recommended), MALA will create this
file according to calculation parameters.</p></li>
<li><p><strong>atoms_Angstrom</strong> (<em>ase.Atoms</em>) – ASE atoms object for the current system. If None, MALA will
create one.</p></li>
<li><p><strong>qe_input_data</strong> (<em>dict</em>) – Quantum Espresso parameters dictionary for the ASE&lt;-&gt;QE interface.
If None (recommended), MALA will create one.</p></li>
<li><p><strong>qe_pseudopotentials</strong> (<em>dict</em>) – Quantum Espresso pseudopotential dictionaty for the ASE&lt;-&gt;QE
interface. If None (recommended), MALA will create one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>energies</strong> –</p>
<dl class="simple">
<dt>A list containing, in order, the following energy contributions:</dt><dd><ul class="simple">
<li><p>n*V_xc</p></li>
<li><p>E_Hartree</p></li>
<li><p>E_xc</p></li>
<li><p>e_Ewald</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.get_feature_size">
<code class="sig-name descname"><span class="pre">get_feature_size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.get_feature_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dimension of this target if used as feature in ML.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.get_number_of_electrons">
<code class="sig-name descname"><span class="pre">get_number_of_electrons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">density_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.get_number_of_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the number of electrons from given density data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>density_data</strong> (<em>numpy.array</em>) – Electronic density on the given grid. Has to either be of the form
gridpoints or gridx x gridy x gridz.</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (in Bohr) used to construct this grid. As of now,
only equidistant grids are supported.</p></li>
<li><p><strong>integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate density on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.get_scaled_positions_for_qe">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_scaled_positions_for_qe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">atoms</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.get_scaled_positions_for_qe" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the positions correctly scaled for QE.</p>
<p>QE (for ibrav=0) scales a little bit different then ASE would.
ASE uses all provided cell parameters, while QE simply sets the
first entry in the cell parameter matrix as reference and divides
all positions by this value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>atoms</strong> (<em>ase.Atoms</em>) – The atom objects for which the scaled positions should be
calculated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>scaled_positions</strong> – The scaled positions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.density.Density.read_from_cube">
<code class="sig-name descname"><span class="pre">read_from_cube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.density.Density.read_from_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the density data from a cube file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> – Name of the cube file.</p></li>
<li><p><strong>directory</strong> – Directory containing the cube file.</p></li>
<li><p><strong>units</strong> (<em>string</em>) – Units the density is saved in. Usually none.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mala.targets.density.Density.te_mutex">
<code class="sig-name descname"><span class="pre">te_mutex</span></code><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#mala.targets.density.Density.te_mutex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mala.targets.dos">
<span id="mala-targets-dos-module"></span><h2>mala.targets.dos module<a class="headerlink" href="#module-mala.targets.dos" title="Permalink to this headline">¶</a></h2>
<p>DOS calculation class.</p>
<dl class="py class">
<dt id="mala.targets.dos.DOS">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mala.targets.dos.</span></code><code class="sig-name descname"><span class="pre">DOS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mala.targets.target_base.TargetBase" title="mala.targets.target_base.TargetBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">mala.targets.target_base.TargetBase</span></code></a></p>
<p>Postprocessing / parsing functions for the density of states (DOS).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<a class="reference internal" href="mala.common.html#mala.common.parameters.Parameters" title="mala.common.parameters.Parameters"><em>mala.common.parameters.Parameters</em></a>) – Parameters used to create this TargetBase object.</p>
</dd>
</dl>
<dl class="py method">
<dt id="mala.targets.dos.DOS.backconvert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">backconvert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_units</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.backconvert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array from MALA units into desired units.</p>
<p>MALA units for the DOS means 1/eV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data in 1/eV.</p></li>
<li><p><strong>out_units</strong> (<em>string</em>) – Desired units of output array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in out_units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.convert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">convert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1/eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.convert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array into the MALA units.</p>
<p>MALA units for the DOS means 1/eV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data for which the units should be converted.</p></li>
<li><p><strong>in_units</strong> (<em>string</em>) – <p>Units of array. Currently supported are:</p>
<blockquote>
<div><ul>
<li><p>1/eV (no conversion, MALA unit)</p></li>
<li><p>1/Ry</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in 1/eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.from_ldos">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_ldos</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.from_ldos" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a DOS object from an LDOS object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ldos_object</strong> (<a class="reference internal" href="#mala.targets.ldos.LDOS" title="mala.targets.ldos.LDOS"><em>mala.targets.ldos.LDOS</em></a>) – LDOS object used as input.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dos_object</strong> – DOS object created from LDOS object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mala.targets.dos.DOS" title="mala.targets.dos.DOS">DOS</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_band_energy">
<code class="sig-name descname"><span class="pre">get_band_energy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_band_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the band energy from given DOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_data</strong> (<em>numpy.array</em>) – DOS data with dimension [energygrid].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>band_energy</strong> – Band energy in eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_density_of_states">
<code class="sig-name descname"><span class="pre">get_density_of_states</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_density_of_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the density of states.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_energy_grid">
<code class="sig-name descname"><span class="pre">get_energy_grid</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_energy_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get energy grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>e_grid</strong> – Energy grid on which the DOS is defined.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_entropy_contribution">
<code class="sig-name descname"><span class="pre">get_entropy_contribution</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_entropy_contribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the entropy contribution to the total energy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_data</strong> (<em>numpy.array</em>) – DOS data with dimension [energygrid].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>entropy_contribution</strong> – S/beta in eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_feature_size">
<code class="sig-name descname"><span class="pre">get_feature_size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_feature_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dimension of this target if used as feature in ML.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_number_of_electrons">
<code class="sig-name descname"><span class="pre">get_number_of_electrons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_number_of_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the number of electrons from given DOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_data</strong> (<em>numpy.array</em>) – DOS data with dimension [energygrid].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>number_of_electrons</strong> – Number of electrons.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.get_self_consistent_fermi_energy_ev">
<code class="sig-name descname"><span class="pre">get_self_consistent_fermi_energy_ev</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.get_self_consistent_fermi_energy_ev" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the self-consistent Fermi energy.</p>
<p>“Self-consistent” does not mean self-consistent in the DFT sense,
but rather the Fermi energy, for which DOS integration reproduces
the exact number of electrons. The term “self-consistent” stems
from how this quantity is calculated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dos_data</strong> (<em>numpy.array</em>) – DOS data with dimension [energygrid].</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fermi_energy_self_consistent</strong> – E_F in eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.read_from_qe_dos_txt">
<code class="sig-name descname"><span class="pre">read_from_qe_dos_txt</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.read_from_qe_dos_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the DOS from a Quantum Espresso generated file.</p>
<p>These files do not have a specified file ending, so I will call them
qe.dos.txt here. QE saves the DOS in 1/eV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>string</em>) – Name of the file containing the DOS.</p></li>
<li><p><strong>directory</strong> (<em>string</em>) – Directory containing the file file_name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DOS data in 1/eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dos_data</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.dos.DOS.read_from_qe_out">
<code class="sig-name descname"><span class="pre">read_from_qe_out</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smearing_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.dos.DOS.read_from_qe_out" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the DOS from a Quantum Espresso DFT output file.</p>
<p>The DOS will be read calculated via the eigenvalues and the equation</p>
<p>D(E) = sum_i sum_k w_k delta(E-epsilon_{ik})</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_file</strong> (<em>string</em>) – Path to the QE out file. If None, the QE output that was loaded
via read_additional_calculation_data will be used.</p></li>
<li><p><strong>smearing_factor</strong> (<em>int</em>) – Smearing factor relative to the energy grid spacing. Default is 2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DOS data in 1/eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dos_data</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mala.targets.ldos">
<span id="mala-targets-ldos-module"></span><h2>mala.targets.ldos module<a class="headerlink" href="#module-mala.targets.ldos" title="Permalink to this headline">¶</a></h2>
<p>LDOS calculation class.</p>
<dl class="py class">
<dt id="mala.targets.ldos.LDOS">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mala.targets.ldos.</span></code><code class="sig-name descname"><span class="pre">LDOS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mala.targets.target_base.TargetBase" title="mala.targets.target_base.TargetBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">mala.targets.target_base.TargetBase</span></code></a></p>
<p>Postprocessing / parsing functions for the local density of states.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<a class="reference internal" href="mala.common.html#mala.common.parameters.Parameters" title="mala.common.parameters.Parameters"><em>mala.common.parameters.Parameters</em></a>) – Parameters used to create this TargetBase object.</p>
</dd>
</dl>
<dl class="py method">
<dt id="mala.targets.ldos.LDOS.backconvert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">backconvert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_units</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.backconvert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array from MALA units into desired units.</p>
<p>MALA units for the LDOS means 1/eV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data in 1/eV.</p></li>
<li><p><strong>out_units</strong> (<em>string</em>) – Desired units of output array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in out_units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.convert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">convert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1/eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.convert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array into the MALA units.</p>
<p>MALA units for the LDOS means 1/eV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data for which the units should be converted.</p></li>
<li><p><strong>in_units</strong> (<em>string</em>) – <p>Units of array. Currently supported are:</p>
<blockquote>
<div><ul>
<li><p>1/eV (no conversion, MALA unit)</p></li>
<li><p>1/Ry</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in 1/eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_and_cache_density_cached">
<code class="sig-name descname"><span class="pre">get_and_cache_density_cached</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_ev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conserve_dimensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_and_cache_density_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate an electronic density from LDOS data and keep it in memory.</p>
<p>For all subsequent calculations involving the electronic density, this
cached density will be used. Usage of this function is advised for
time-critical calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conserve_dimensions</strong> (<em>bool</em>) – If True, the density is returned in the same dimensions as
the LDOS was entered. If False, the density is always given
as [gridsize].</p></li>
<li><p><strong>fermi_energy_ev</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>integration_method</strong> – <p>Integration method to integrate LDOS on energygrid.
Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>density_data</strong> – Density data, dimensions depend on conserve_dimensions and LDOS
dimensions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_and_cache_density_of_states">
<code class="sig-name descname"><span class="pre">get_and_cache_density_of_states</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_and_cache_density_of_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a DOS from LDOS data and keep it in memory.</p>
<p>For all subsequent calculations involving the DOS, this cached
DOS will be used. Usage of this function is advised for time-critical
calculations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (in Bohr) used to construct this grid. As of now,
only equidistant grids are supported.</p></li>
<li><p><strong>integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate LDOS on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dos_values</strong> – The DOS.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_band_energy">
<code class="sig-name descname"><span class="pre">get_band_energy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_band_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the band energy from given LDOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>grid_integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate the LDOS on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
<li><p><strong>energy_integration_method</strong> (<em>string</em>) – <p>Integration method to integrate the DOS. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. (recommended)</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (distance between grid points) in Bohr.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>band_energy</strong> – Band energy in eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_density">
<code class="sig-name descname"><span class="pre">get_density</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_ev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conserve_dimensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the density from given LDOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conserve_dimensions</strong> (<em>bool</em>) – If True, the density is returned in the same dimensions as
the LDOS was entered. If False, the density is always given
as [gridsize].</p></li>
<li><p><strong>fermi_energy_ev</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>integration_method</strong> (<em>string</em>) – <p>Integration method to be used. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>integration_method</strong> – <p>Integration method to integrate LDOS on energygrid.
Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. Recommended.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>density_data</strong> – Density data, dimensions depend on conserve_dimensions and LDOS
dimensions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_density_of_states">
<code class="sig-name descname"><span class="pre">get_density_of_states</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_density_of_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the density of states from given LDOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (in Bohr) used to construct this grid. As of now,
only equidistant grids are supported.</p></li>
<li><p><strong>integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate LDOS on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dos_values</strong> – The DOS.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_energy_grid">
<code class="sig-name descname"><span class="pre">get_energy_grid</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_energy_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get energy grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>e_grid</strong> – Energy grid on which the LDOS is defined.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_feature_size">
<code class="sig-name descname"><span class="pre">get_feature_size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_feature_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dimension of this target if used as feature in ML.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_number_of_electrons">
<code class="sig-name descname"><span class="pre">get_number_of_electrons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_number_of_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the number of electrons from given LDOS data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>grid_integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate the LDOS on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
<li><p><strong>energy_integration_method</strong> (<em>string</em>) – <p>Integration method to integrate the DOS. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. (recommended)</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (distance between grid points) in Bohr.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>number_of_electrons</strong> – Number of electrons.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_self_consistent_fermi_energy_ev">
<code class="sig-name descname"><span class="pre">get_self_consistent_fermi_energy_ev</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_self_consistent_fermi_energy_ev" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the self-consistent Fermi energy.</p>
<p>“Self-consistent” does not mean self-consistent in the DFT sense,
but rather the Fermi energy, for which DOS integration reproduces
the exact number of electrons. The term “self-consistent” stems
from how this quantity is calculated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid].</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>grid_integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate the LDOS on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
<li><p><strong>energy_integration_method</strong> (<em>string</em>) – <p>Integration method to integrate the DOS. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. (recommended)</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (distance between grid points) in Bohr.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fermi_energy_self_consistent</strong> – E_F in eV.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.get_total_energy">
<code class="sig-name descname"><span class="pre">get_total_energy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldos_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dos_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fermi_energy_eV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_K</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing_bohr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'summation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_integration_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'analytical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atoms_Angstrom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qe_input_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qe_pseudopotentials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.get_total_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the total energy from LDOS or given DOS + density data.</p>
<p>EITHER LDOS OR Density+DOS data have to be specified. Elsewise
this function will raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ldos_data</strong> (<em>numpy.array</em>) – LDOS data, either as [gridsize, energygrid] or
[gridx,gridy,gridz,energygrid]. If None, dos_data and density_data
cannot be None.</p></li>
<li><p><strong>dos_data</strong> (<em>numpy.array</em>) – DOS data, as [energygrid].</p></li>
<li><p><strong>density_data</strong> (<em>numpy.array</em>) – Density data, either as [gridsize] or [gridx,gridy,gridz].</p></li>
<li><p><strong>fermi_energy_eV</strong> (<em>float</em>) – Fermi energy level in eV.</p></li>
<li><p><strong>temperature_K</strong> (<em>float</em>) – Temperature in K.</p></li>
<li><p><strong>grid_spacing_bohr</strong> (<em>float</em>) – Grid spacing (in Bohr) used to construct this grid. As of now,
only equidistant grids are supported.</p></li>
<li><p><strong>grid_integration_method</strong> (<em>str</em>) – <p>Integration method used to integrate the density on the grid.
Currently supported:</p>
<ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”summation” for summation and scaling of the values (recommended)</p></li>
</ul>
</p></li>
<li><p><strong>energy_integration_method</strong> (<em>string</em>) – <p>Integration method to integrate the DOS. Currently supported:</p>
<blockquote>
<div><ul>
<li><p>”trapz” for trapezoid method</p></li>
<li><p>”simps” for Simpson method.</p></li>
<li><p>”analytical” for analytical integration. (recommended)</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>atoms_Angstrom</strong> (<em>ase.Atoms</em>) – ASE atoms object for the current system. If None, MALA will
create one.</p></li>
<li><p><strong>qe_input_data</strong> (<em>dict</em>) – Quantum Espresso parameters dictionary for the ASE&lt;-&gt;QE interface.
If None (recommended), MALA will create one.</p></li>
<li><p><strong>qe_pseudopotentials</strong> (<em>dict</em>) – Quantum Espresso pseudopotential dictionaty for the ASE&lt;-&gt;QE
interface. If None (recommended), MALA will create one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>total_energy</strong> – Total energy of the system (in eV).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.read_from_cube">
<code class="sig-name descname"><span class="pre">read_from_cube</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name_scheme</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1/eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.read_from_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the LDOS data from multiple cube files.</p>
<p>The files have to be located in the same directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name_scheme</strong> (<em>string</em>) – Naming scheme for the LDOS .cube files.</p></li>
<li><p><strong>directory</strong> (<em>string</em>) – Directory containing the LDOS .cube files.</p></li>
<li><p><strong>units</strong> (<em>string</em>) – Units the LDOS is saved in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ldos_data</strong> – Numpy array containing LDOS data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.uncache_density">
<code class="sig-name descname"><span class="pre">uncache_density</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.uncache_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Uncache a density, to calculate a new one in following steps.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.ldos.LDOS.uncache_density_of_states">
<code class="sig-name descname"><span class="pre">uncache_density_of_states</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.ldos.LDOS.uncache_density_of_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Uncache a DOS, to calculate a new one in following steps.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mala.targets.target_base">
<span id="mala-targets-target-base-module"></span><h2>mala.targets.target_base module<a class="headerlink" href="#module-mala.targets.target_base" title="Permalink to this headline">¶</a></h2>
<p>Base class for all target calculators.</p>
<dl class="py class">
<dt id="mala.targets.target_base.TargetBase">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mala.targets.target_base.</span></code><code class="sig-name descname"><span class="pre">TargetBase</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Base class for all target quantity parser.</p>
<p>Target parsers read the target quantity
(i.e. the quantity the NN will learn to predict) from a specified file
format and performs postprocessing calculations on the quantity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>mala.common.parameters.Parameters or</em>) – </p></li>
<li><p><strong>mala.common.parameters.ParametersTargets</strong> – Parameters used to create this TargetBase object.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.backconvert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">backconvert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_units</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.backconvert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array from MALA units into desired units.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data in MALA units.</p></li>
<li><p><strong>out_units</strong> (<em>string</em>) – Desired units of output array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in out_units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.convert_units">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">convert_units</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eV'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.convert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the units of an array into the MALA units.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.array</em>) – Data for which the units should be converted.</p></li>
<li><p><strong>in_units</strong> (<em>string</em>) – Units of array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converted_array</strong> – Data in MALA units.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_band_energy">
<code class="sig-name descname"><span class="pre">get_band_energy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_band_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the band energy.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_density">
<code class="sig-name descname"><span class="pre">get_density</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_density" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the electronic density.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_density_of_states">
<code class="sig-name descname"><span class="pre">get_density_of_states</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_density_of_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the density of states.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_energy_grid">
<code class="sig-name descname"><span class="pre">get_energy_grid</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_energy_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get energy grid.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_feature_size">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_feature_size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_feature_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dimension of this target if used as feature in ML.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_number_of_electrons">
<code class="sig-name descname"><span class="pre">get_number_of_electrons</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_number_of_electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of electrons.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.get_total_energy">
<code class="sig-name descname"><span class="pre">get_total_energy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.get_total_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total energy.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.read_additional_calculation_data">
<code class="sig-name descname"><span class="pre">read_additional_calculation_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.read_additional_calculation_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in additional input about a calculation.</p>
<p>This is e.g. necessary when we operate with preprocessed
data for the training itself but want to take into account other
physical quantities (such as the fermi energy or the electronic
temperature) for post processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_type</strong> (<em>string</em>) – Type of data or file that is used. Currently only supports
qe.out for Quantum Espresso outfiles.</p></li>
<li><p><strong>data</strong> (<em>string</em><em> or </em><em>list</em>) – Data from which additional calculation data is inputted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.read_from_cube">
<code class="sig-name descname"><span class="pre">read_from_cube</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.read_from_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the quantity from a .cube file.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.read_from_qe_dos_txt">
<code class="sig-name descname"><span class="pre">read_from_qe_dos_txt</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.read_from_qe_dos_txt" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the quantity from a Quantum Espresso .dos.txt file.</p>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.restrict_data">
<code class="sig-name descname"><span class="pre">restrict_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_base.TargetBase.restrict_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrict target data to only contain physically meaningful values.</p>
<p>For the LDOS this e.g. implies non-negative values. The type
of data restriction is specified by the parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>array</strong> (<em>numpy.array</em>) – Numpy array, for which the restrictions are to be applied.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>array</strong> – The same array, with restrictions enforced.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mala.targets.target_base.TargetBase.qe_input_data">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">qe_input_data</span></code><a class="headerlink" href="#mala.targets.target_base.TargetBase.qe_input_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Input data for QE TEM calls.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mala.targets.target_interface">
<span id="mala-targets-target-interface-module"></span><h2>mala.targets.target_interface module<a class="headerlink" href="#module-mala.targets.target_interface" title="Permalink to this headline">¶</a></h2>
<p>Interface function for getting Targets.</p>
<dl class="py function">
<dt id="mala.targets.target_interface.TargetInterface">
<code class="sig-prename descclassname"><span class="pre">mala.targets.target_interface.</span></code><code class="sig-name descname"><span class="pre">TargetInterface</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mala.targets.target_interface.TargetInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Return correct target calculator/parser, based on parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<a class="reference internal" href="mala.common.html#mala.common.parameters.Parameters" title="mala.common.parameters.Parameters"><em>mala.common.parameters.Parameters</em></a>) – Parameters used to create this TargetBase object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>target</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>mala.targets.targets.TargetBase or derivative</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mala.targets">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-mala.targets" title="Permalink to this headline">¶</a></h2>
<p>Calculators for physical output quantities.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../CONTRIBUTE.html" class="btn btn-neutral float-right" title="Contributing to MALA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mala.network.html" class="btn btn-neutral float-left" title="mala.network package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021 National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS). Under the terms of Contract DE-NA0003525 with NTESS, the U.S. Government retains certain rights in this software. Attila Cangi, J. Austin Ellis, Lenz Fiedler, Daniel Kotik, Normand Modine, Sivasankaran Rajamanickam, Steve Schmerler, Aidan Thompson.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>